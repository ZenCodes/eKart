<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="../components/core-ajax/core-ajax.html">

<polymer-element name="element-service" attributes="products url skp">
   <template>
    <style>
    :host {
      display: none;
    }
    </style>
     <core-ajax id="ajax"
      auto
      url="http://hotelapp.iriscouch.com/product/_all_docs?include_docs=true&limit=12"
      handleAs="json"
      on-core-response="{{productsLoaded}}"
      id="productDataSource">
    </core-ajax>
  </template>
  <script>
   Polymer('element-service', {
     ready: function()
   {
   this.url="http://hotelapp.iriscouch.com/product/_all_docs?include_docs=true&limit=12";
   },
   created: function() {
   this.products = [];
   this.pr=[];
   this.pr1=[];
   },
   productsLoaded: function(event,detail) {
   this.products = this.$.ajax.response;
   for(var i=0;i<this.products.rows.length;i++)
   {
   this.pr[i]=this.products.rows[i].doc.img1;
   }
    var arr={"i1": "","i2": "","i3": "","i4": "","i5": "","i6": "","i7": "","i8": "","i9": "","i10": "","i11": "","i12": ""};
    arr.i1=this.pr[0];
    arr.i2=this.pr[1];
    arr.i3=this.pr[2];
    arr.i4=this.pr[3];
    arr.i5=this.pr[4];
    arr.i6=this.pr[5];
    arr.i7=this.pr[6];
    arr.i8=this.pr[7];
    arr.i9=this.pr[8];
    arr.i10=this.pr[9];
    arr.i11=this.pr[10];
    arr.i12=this.pr[11];
    this.pr1.push(arr);
    //alert(JSON.stringify(this.pr1));
    //document.querySelector('product-list').products=this.pr1[0];
    //document.querySelector('my-element').products=this.pr1[0];
   document.querySelector('inx-element').shadowRoot.querySelector('product-list').shadowRoot.querySelector('my-element').products=this.pr1[0];
    //alert(document.querySelector('my-element').products.i12);
    //document.querySelector('product-list').reload;
    //document.querySelector('my-element').reload;
    //document.querySelector('product-list').shadowRoot.querySelector('my-element').reload();
    }
    });
  </script>
</polymer-element>
`