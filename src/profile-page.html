<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../components/slide-page/slide-page.html">

<link rel="import" href="cart-ajax.html">

<polymer-element name="profile-page">

<template>

    <style>
      :host {
        position: absolute;
        width: 100%;
`        height: 100%;
        box-sizing: border-box;
      }
      #core_card2 {
      	        position: absolute;
      	        width: 400px;
      	        height: 250px;
      	        border-radius: 2px;
      	        box-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 4px, rgba(0, 0, 0, 0.0980392) 0px 0px 3px;
      	        left: 300px;
      	        top: 60px;
      	        background-color: rgb(255, 255, 255);


      	      }
      	      div{
      	      padding-bottom:20px;
      	      font-size-14px;
      	      margin-left:30px;
      	      }
      	      #ch{
				font-size: 13px;
		  		background-color:rgb(0, 188, 212);
      	      }

    </style>
     <core-ajax id="rajax" auto="false" handleAs="json"
		contentType="application/json" url="http://hotelapp.iriscouch.com/webregister/_design/regcheckdesign/_view/regcheckview?key={{uname}}"
		on-core-response="{{regLoaded}}">
	</core-ajax>

    	    <core-card id="core_card2"  class="core_card2" vertical wrap layout >
			<h4 style="margin-left:30px;">Profile</h4>
            <div>Name: {{name}}</div>
            <div>Email id: {{email}}</div>
            <div>Phone no: {{phone}}</div>

     		<div><paper-button id="ch" on-click="{{change}}">change password</paper-button></div>
			</core-card>


  </template>

  <script>

    Polymer({
    ready:function()
    {
    this.regarr=[];
    this.uname=JSON.stringify(localStorage.getItem("nam"));
    this.$.rajax.go();
    },
    regLoaded:function(){

    this.regarr=this.$.rajax.response;
    this.name=this.regarr.rows[0].value.regarr[0].name;
    this.email=this.regarr.rows[0].value.regarr[0].email;
    this.phone=this.regarr.rows[0].value.regarr[0].phone;
    //alert(JSON.stringify(this.regarr.rows[0].value.regarr[0].name));
    },
change:function(e)
{
//alert(this.name);
document.querySelector('inx-element').shadowRoot.querySelector('product-list').shadowRoot.querySelector('profile-pass').shadowRoot.querySelector('change-page').hiddenVal(true,false);
//this.$.chn.chnpass(this.name);
}
    });

  </script>

</polymer-element>